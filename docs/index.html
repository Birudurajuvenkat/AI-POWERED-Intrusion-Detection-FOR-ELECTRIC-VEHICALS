<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI IDS Dashboard</title>

<style>
:root{
    --accent:#22c55e;
    --danger:#ef4444;
    --text:#e5e7eb;
    --muted:#9ca3af;
}

body{
    margin:0;
    font-family:"Segoe UI", sans-serif;
    background:url("Background_img.jpg") no-repeat center/cover;
    min-height:100vh;
    color:var(--text);
}

.overlay{
    background:rgba(0,0,0,0.65);
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:40px;
}

/* LAYOUT */
.layout{
    display:grid;
    grid-template-columns: 1.1fr 0.9fr;
    gap:40px;
    max-width:1200px;
    width:100%;
}

/* GLASS PANELS */
.glass-panel, .info-panel{
    backdrop-filter: blur(14px);
    background: rgba(255,255,255,0.06);
    border-radius:22px;
    padding:40px;
    box-shadow:
        0 0 40px rgba(34,197,94,0.15),
        inset 0 0 30px rgba(255,255,255,0.03);
}

/* TEXT */
h1{
    margin:0;
    font-size:34px;
    color:var(--accent);
}

h2{
    color:var(--accent);
    margin-top:0;
}

p{
    color:var(--muted);
    line-height:1.7;
    margin:14px 0;
}

/* INPUTS */
.inputs{
    display:flex;
    flex-direction:column;
    gap:18px;
}

input{
    padding:16px;
    font-size:16px;
    border-radius:14px;
    border:1px solid rgba(255,255,255,0.15);
    background:rgba(0,0,0,0.4);
    color:white;
}

input::placeholder{
    color:#9ca3af;
}

/* BUTTON */
button{
    margin-top:25px;
    padding:16px;
    border-radius:16px;
    font-size:18px;
    font-weight:600;
    border:none;
    cursor:pointer;
    background:linear-gradient(90deg,#22c55e,#16a34a);
    color:#052e16;
    transition:0.3s;
}

button:hover{
    transform:translateY(-2px);
    box-shadow:0 12px 30px rgba(34,197,94,0.4);
}

/* STATUS */
.status{
    margin-top:25px;
    font-size:18px;
    font-weight:600;
}

.success{ color:var(--accent); }
.error{ color:var(--danger); }

/* POPUP (FIXED) */
.popup{
    display:none; /* stays hidden on refresh */
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.75);
    align-items:center;
    justify-content:center;
    z-index:999;
}

.popup-content{
    background:rgba(0,0,0,0.85);
    padding:30px;
    border-radius:18px;
    text-align:center;
    box-shadow:0 0 30px rgba(239,68,68,0.6);
}

.popup-content h2{
    color:var(--danger);
}

.popup-content button{
    margin-top:15px;
    padding:12px 20px;
    border:none;
    border-radius:10px;
    background:#ef4444;
    color:white;
    font-size:16px;
    cursor:pointer;
}

/* RESPONSIVE */
@media(max-width:900px){
    .layout{
        grid-template-columns:1fr;
    }
}
</style>

<script>
function showPopup(msg){
    document.getElementById("popup-msg").innerText = msg;
    document.getElementById("popup").style.display = "flex";
}

function closePopup(){
    document.getElementById("popup").style.display = "none";
}

async function checkIntrusion(){
    const length = document.getElementById("length").value;
    const protocol = document.getElementById("protocol").value;
    const result = document.getElementById("result");
    const sms = document.getElementById("sms");

    if(!length || !protocol){
        result.innerText = "‚ö†Ô∏è Please enter all fields";
        result.className = "status error";
        return;
    }

    result.innerText = "‚è≥ Analyzing in-vehicle network traffic...";
    result.className = "status";

    try{
        const res = await fetch("https://ai-ids-backend.onrender.com/detect",{
            method:"POST",
            headers:{"Content-Type":"application/json"},
            body:JSON.stringify({
                length:Number(length),
                protocol:Number(protocol)
            })
        });

        const data = await res.json();

        if(data.result.includes("Intrusion")){
            result.innerText = data.result;
            result.className = "status error";
            sms.innerText = "üì© Alert sent to user & network provider";
            showPopup("üö® Intrusion detected! Immediate action required.");
        }else{
            result.innerText = data.result;
            result.className = "status success";
            sms.innerText = "";
        }
    }catch{
        result.innerText = "‚ùå Backend server not reachable";
        result.className = "status error";
    }
}
</script>
</head>

<body>
<div class="overlay">
<div class="layout">

<!-- LEFT PANEL -->
<div class="glass-panel">
<h1>AI-Powered Intrusion Detection</h1>

<p>
This system detects cyber intrusions in electric vehicles by monitoring
in-vehicle network traffic using artificial intelligence.
</p>

<div class="inputs">
<input type="number" id="length" placeholder="Packet Length (e.g., 1200)">
<input type="number" id="protocol" placeholder="Protocol (6 = TCP, 17 = UDP)">
</div>

<button onclick="checkIntrusion()">Analyze Traffic</button>

<div id="result" class="status">Waiting for input‚Ä¶</div>
<div id="sms" class="status"></div>
</div>

<!-- RIGHT PANEL -->
<div class="info-panel">
<h2>What data is analyzed?</h2>

<p>
Electric Vehicles consist of multiple <b>Electronic Control Units (ECUs)</b>
communicating through in-vehicle networks.
</p>

<p>
‚Ä¢ Battery & charge status  
<br>‚Ä¢ Motor speed & torque  
<br>‚Ä¢ Brake & steering signals  
<br>‚Ä¢ Door control messages  
<br>‚Ä¢ Diagnostic & firmware data
</p>

<p>
<b>Packet Length</b> represents message size. Abnormal sizes may indicate
malicious injection, spoofing, or unauthorized ECU access.
</p>

<p>
<b>Protocol</b> defines transmission behavior:
<br>‚Ä¢ <b>6</b> ‚Üí TCP  
<br>‚Ä¢ <b>17</b> ‚Üí UDP
</p>

<p>
‚ö° In-Vehicle Network Monitoring  
<br>üß† AI-Based Anomaly Detection  
<br>üöó Electric Vehicle Cybersecurity
</p>
</div>

</div>
</div>

<!-- POPUP -->
<div id="popup" class="popup">
<div class="popup-content">
<h2 id="popup-msg"></h2>
<button onclick="closePopup()">Close</button>
</div>
</div>

</body>
</html>
